from autotrack.core import TimePoint
from autotrack.core.resolution import ImageResolution
from autotrack.lineage_plotting.lineage_lib import Lineage
import matplotlib.pyplot as plt

lineage_id = [1, [[1, [1, 16]], [10, [[10, [10, [20, [20, [24, [[24, [[24, [[24, [24, 47]], [36, [36, 46]]]], [31, [[31, [31, 48]], [38, [[38, [38, 61]], [44, [44, [55, [55, 64]]]]]]]]]], [27, [[27, [[27, [[27, [[27, [27, 62]], 52]], [40, [[40, [40, 58]], 49]]]], 33]], 29]]]]]]]], [14, [14, [23, [23, 26]]]]]]]]

lin_interval = [0, [[64.36999999999603, [127.68000000002841, 127.68000000002841]], [64.36999999999603, [[121.18000000002509, [181.6299999999798, [181.6299999999798, [237.50999999992897, [237.50999999992897, [[283.3599999998873, [[360.4099999998172, [[404.99999999977666, [479.44999999970895, 479.44999999970895]], [404.99999999977666, [473.7999999997141, 473.7999999997141]]]], [360.4099999998172, [[411.29999999977093, [500.1699999996901, 500.1699999996901]], [411.29999999977093, [[466.189999999721, [566.27999999963, 566.27999999963]], [466.189999999721, [517.5199999996744, [517.5199999996744, [572.3599999996245, 572.3599999996245]]]]]]]]]], [283.3599999998873, [[335.1599999998402, [[391.90999999978857, [[442.3599999997427, [[512.8199999996787, [567.6199999996288, 567.6199999996288]], 512.8199999996787]], [442.3599999997427, [[500.25999999969, [548.6299999996461, 548.6299999996461]], 500.25999999969]]]], 391.90999999978857]], 335.1599999998402]]]]]]]], [121.18000000002509, [228.52999999993713, [228.52999999993713, [282.4599999998881, 282.4599999998881]]]]]]]]


def color_getter(time_point, cell_id) -> float:
    return cell_id

lineage = Lineage(lineage_id, lin_interval, 26)
T_end = 600
width = lineage.draw_lineage_diagram_with_data_as_color(plt.gca(), T_end, color_getter, [0, 60], x_offset=0, image_resolution=ImageResolution(0.32, 0.32, 2, 120))
plt.ylim([T_end, 0])
plt.xlim([-1, width + 1])
plt.show()
